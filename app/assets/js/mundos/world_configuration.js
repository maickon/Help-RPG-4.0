function random (n) { return Math.floor(Math.random() * n); }

	// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
	// configuration
	
	  var default_query = {
	    'seed':             Date.now(),
	    'projection':       'square',
	    'palette':          'atlas',
	    'pct_water':        random(50) + 25,
	    'pct_ice':          random(10) + 5,
	    'height':           400,
	    'iter':             5000,
	    'rotate':           0
	  };
	  var max_height      = 1000;
	  var max_iter        = 25000;
	
	// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
	// palettes
	
	  var palette = {
	    'olsson': {                         // john olsson
	      'title':          'Floresta e Deserto',
	      'sea': [
	        [0x00,0x00,0x44], [0x00,0x11,0x66], [0x00,0x33,0x88],
	        [0x00,0x55,0xAA], [0x00,0x77,0xBB], [0x00,0x99,0xDD],
	        [0x00,0xCC,0xFF], [0x22,0xDD,0xFF], [0x44,0xEE,0xFF],
	        [0x66,0xFF,0xFF], [0x77,0xFF,0xFF], [0x88,0xFF,0xFF],
	        [0x99,0xFF,0xFF], [0xAA,0xFF,0xFF], [0xBB,0xFF,0xFF]
	      ],
	      'land': [
	        [0x00,0x44,0x00], [0x22,0x66,0x00], [0x22,0x88,0x00],
	        [0x77,0xAA,0x00], [0xBB,0xDD,0x00], [0xFF,0xBB,0x22],
	        [0xEE,0xAA,0x22], [0xDD,0x88,0x22], [0xCC,0x88,0x22],
	        [0xBB,0x66,0x22], [0xAA,0x55,0x22], [0x99,0x55,0x22],
	        [0x88,0x44,0x22], [0x77,0x33,0x22], [0x55,0x33,0x11],
	        [0x44,0x22,0x00]
	      ]
	    },
	    'mogensen': {                       // toben mogensen
	      'title':          'Terras florestais',
	      'sea': [
	        [0x00,0x00,0xC0], [0x00,0x09,0xC4], [0x00,0x12,0xC9],
	        [0x00,0x1B,0xCD], [0x00,0x24,0xD2], [0x00,0x2D,0xD6],
	        [0x00,0x36,0xDB], [0x00,0x40,0xDF], [0x00,0x49,0xE4],
	        [0x00,0x52,0xE8], [0x00,0x5B,0xED], [0x00,0x64,0xF1],
	        [0x00,0x6D,0xF6], [0x00,0x76,0xFA], [0x00,0x80,0xFF]
	      ],
	      'land': [
	        [0x00,0x60,0x00], [0x00,0x80,0x00], [0x00,0xA0,0x00],
	        [0x00,0xC0,0x00], [0x00,0xE0,0x00], [0x20,0xD4,0x00],
	        [0x40,0xC8,0x00], [0x60,0xBC,0x00], [0x80,0xB0,0x00],
	        [0x80,0xA4,0x20], [0x80,0x98,0x40], [0x80,0x8C,0x60],
	        [0x80,0x80,0x80], [0xAA,0xAA,0xAA], [0xD4,0xD4,0xD4],
	        [0xFF,0xFF,0xFF]
	      ]
	    },
	    'atlas': {
	      'title':          'Normal',
	      'sea': [
	        [0x80,0xB0,0xBD], [0x86,0xB5,0xC1], [0x8D,0xBA,0xC6],
	        [0x94,0xBF,0xCA], [0x9A,0xC4,0xCF], [0xA1,0xC9,0xD4],
	        [0xA8,0xCE,0xD8], [0xAF,0xD3,0xDD], [0xB5,0xD8,0xE2],
	        [0xBC,0xDD,0xE6], [0xC3,0xE2,0xEB], [0xCA,0xE8,0xF0],
	        [0xCA,0xE8,0xF0], [0xCA,0xE8,0xF0], [0xCA,0xE8,0xF0]
	      ],
	      'land': [
	        [0x84,0xB6,0x77], [0x93,0xBD,0x80], [0xA2,0xC5,0x8A],
	        [0xB1,0xCC,0x93], [0xC0,0xD4,0x9D], [0xCF,0xDB,0xA6],
	        [0xDE,0xE3,0xB0], [0xED,0xEB,0xBA], [0xE0,0xD9,0xAF],
	        [0xD3,0xC7,0xA3], [0xC6,0xB5,0x98], [0xB9,0xA3,0x8C],
	        [0xCA,0xBA,0xA8], [0xDC,0xD1,0xC5], [0xED,0xE8,0xE2],
	        [0xFF,0xFF,0xFF]
	      ]
	    },
	    'antique': {
	      'title':          'Antigo',
	      'set':            { 'pct_ice': 0 },
	      'sea': [
	        [0xEB,0xD2,0xB0], [0xE8,0xD0,0xAE], [0xE5,0xCD,0xAC],
	        [0xE2,0xCA,0xAA], [0xDF,0xC8,0xA7], [0xDC,0xC5,0xA5],
	        [0xD9,0xC2,0xA3], [0xD6,0xC0,0xA0],
	        [0xD3,0xBD,0x9E], [0xD0,0xBA,0x9C], [0xCC,0xB7,0x99],
	        [0x99,0x8A,0x73], [0x66,0x5C,0x4D], [0x33,0x2E,0x27],
	        [0x00,0x00,0x00]
	      ],
	      'land': [
	        [0xE2,0xCA,0xAA], [0xE2,0xCA,0xAA], [0xE3,0xCB,0xAA],
	        [0xE3,0xCB,0xAB], [0xE4,0xCC,0xAB], [0xE5,0xCC,0xAC],
	        [0xE5,0xCD,0xAC], [0xE6,0xCD,0xAC], [0xE6,0xCE,0xAD],
	        [0xE7,0xCE,0xAD], [0xE8,0xCF,0xAE], [0xE8,0xCF,0xAE],
	        [0xE9,0xD0,0xAE], [0xE9,0xD0,0xAF], [0xEA,0xD1,0xAF],
	        [0xEB,0xD2,0xB0]
	      ]
	    },
	    'barren': {
	      'title':          'Terras Ã¡ridas',
	      'sea': [
	        [0x00,0x00,0xC0], [0x00,0x09,0xC4], [0x00,0x12,0xC9],
	        [0x00,0x1B,0xCD], [0x00,0x24,0xD2], [0x00,0x2D,0xD6],
	        [0x00,0x36,0xDB], [0x00,0x40,0xDF], [0x00,0x49,0xE4],
	        [0x00,0x52,0xE8], [0x00,0x5B,0xED], [0x00,0x64,0xF1],
	        [0x00,0x6D,0xF6], [0x00,0x76,0xFA], [0x00,0x80,0xFF]
	      ],
	      'land': [
	        [0x94,0x64,0x52], [0xA9,0x74,0x54], [0xBE,0x84,0x56],
	        [0xD3,0x94,0x58], [0xE8,0xA4,0x5A], [0xEC,0xA8,0x5A],
	        [0xF0,0xAC,0x5B], [0xF4,0xB0,0x5B], [0xF8,0xB4,0x5C],
	        [0xE4,0xA7,0x60], [0xCF,0x9A,0x64], [0xBA,0x8D,0x68],
	        [0xA5,0x80,0x6C], [0xC3,0xAA,0x9D], [0xE1,0xD4,0xCE],
	        [0xFF,0xFF,0xFF]
	      ]
	    },
	    'martian': {
	      'title':          'Marciano',
	      'set':            { 'pct_water': 0 },
	      'sea': [
	        [0x00,0x00,0xC0], [0x00,0x09,0xC4], [0x00,0x12,0xC9],
	        [0x00,0x1B,0xCD], [0x00,0x24,0xD2], [0x00,0x2D,0xD6],
	        [0x00,0x36,0xDB], [0x00,0x40,0xDF], [0x00,0x49,0xE4],
	        [0x00,0x52,0xE8], [0x00,0x5B,0xED], [0x00,0x64,0xF1],
	        [0x00,0x6D,0xF6], [0x00,0x76,0xFA], [0x00,0x80,0xFF]
	      ],
	      'land': [
	        [0x94,0x64,0x52], [0xA9,0x74,0x54], [0xBE,0x84,0x56],
	        [0xD3,0x94,0x58], [0xE8,0xA4,0x5A], [0xEC,0xA8,0x5A],
	        [0xF0,0xAC,0x5B], [0xF4,0xB0,0x5B], [0xF8,0xB4,0x5C],
	        [0xE4,0xA7,0x60], [0xCF,0x9A,0x64], [0xBA,0x8D,0x68],
	        [0xA5,0x80,0x6C], [0xC3,0xAA,0x9D], [0xE1,0xD4,0xCE],
	        [0xFF,0xFF,0xFF]
	      ]
	    },
	    'chthonian': {
	      'title':          'Infernal',
	      'set':            { 'pct_ice': 0 },
	      'sea': [
	        [0xFB,0xE7,0x2E], [0xFB,0xC3,0x2C], [0xFC,0x9E,0x29],
	        [0xFD,0x7A,0x27], [0xFE,0x55,0x24], [0xF8,0x4D,0x21],
	        [0xF2,0x44,0x1D], [0xEC,0x3C,0x1A], [0xE6,0x33,0x16],
	        [0xDF,0x2B,0x12], [0xD9,0x22,0x0F], [0xD3,0x1A,0x0B],
	        [0xCD,0x11,0x08], [0xC7,0x09,0x04], [0xC0,0x00,0x00]
	      ],
	      'land': [
	        [0x10,0x10,0x10], [0x14,0x14,0x14], [0x18,0x18,0x18],
	        [0x1D,0x1D,0x1D], [0x21,0x21,0x21], [0x25,0x25,0x25],
	        [0x2A,0x2A,0x2A], [0x2E,0x2E,0x2E], [0x32,0x32,0x32],
	        [0x37,0x37,0x37], [0x3B,0x3B,0x3B], [0x40,0x40,0x40],
	        [0x50,0x50,0x50], [0x60,0x60,0x60], [0x70,0x70,0x70],
	        [0x80,0x80,0x80]
	      ]
	    },
	    'greyscale': {
	      'title':          'Cinzentado',
	      'set':            { 'pct_water': 0, 'pct_ice': 0 },
	      'sea': [
	        [0x00,0x00,0xC0], [0x00,0x09,0xC4], [0x00,0x12,0xC9],
	        [0x00,0x1B,0xCD], [0x00,0x24,0xD2], [0x00,0x2D,0xD6],
	        [0x00,0x36,0xDB], [0x00,0x40,0xDF], [0x00,0x49,0xE4],
	        [0x00,0x52,0xE8], [0x00,0x5B,0xED], [0x00,0x64,0xF1],
	        [0xCD,0x11,0x08], [0xC7,0x09,0x04], [0xC0,0x00,0x00]
	      ],
	      'land': [
	        [0x40,0x40,0x40], [0x48,0x48,0x48], [0x51,0x51,0x51],
	        [0x59,0x59,0x59], [0x62,0x62,0x62], [0x6A,0x6A,0x6A],
	        [0x73,0x73,0x73], [0x7B,0x7B,0x7B], [0x84,0x84,0x84],
	        [0x37,0x37,0x37], [0x3B,0x3B,0x3B], [0x40,0x40,0x40],
	        [0x50,0x50,0x50], [0x60,0x60,0x60], [0x70,0x70,0x70],
	        [0x80,0x80,0x80]
	      ]
	    },
	    'landmask': {
	      'title':          'Preto e Branco',
	      'set':            { 'pct_ice': 0 },
	      'sea': [
	        [0x00,0x00,0x00], [0x00,0x00,0x00], [0x00,0x00,0x00],
	        [0x00,0x00,0x00], [0x00,0x00,0x00], [0x00,0x00,0x00],
	        [0x00,0x00,0x00], [0x00,0x00,0x00], [0x00,0x00,0x00],
	        [0x00,0x00,0x00], [0x00,0x00,0x00], [0x00,0x00,0x00],
	        [0x00,0x00,0x00], [0x00,0x00,0x00], [0x00,0x00,0x00]
	      ],
	      'land': [
	        [0xFF,0xFF,0xFF], [0xFF,0xFF,0xFF], [0xFF,0xFF,0xFF],
	        [0xFF,0xFF,0xFF], [0xFF,0xFF,0xFF], [0xFF,0xFF,0xFF],
	        [0xFF,0xFF,0xFF], [0xFF,0xFF,0xFF], [0xFF,0xFF,0xFF],
	        [0xFF,0xFF,0xFF], [0xFF,0xFF,0xFF], [0xFF,0xFF,0xFF],
	        [0xFF,0xFF,0xFF], [0xFF,0xFF,0xFF], [0xFF,0xFF,0xFF],
	        [0xFF,0xFF,0xFF]
	      ]
	    }
	  };

	// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -